#set( $title = "Figgo - Minha conta" )
#set( $module = "user" )
#parse( "templates/intern.vm" )

#head()

#fullHeader()

#@body()
<div id="user-sidebar" class="left sidebar">
    <section id="about-intern" class="user">
        <h2>$user.name</h2>
        #if( $user.avatarKey )
        <a href="/user/upload"><img id="avatar" src="/serve/$user.avatarKey" alt="Avatar do usuário" /></a>
        #else
        <a href="/user/upload"><img id="avatar" src="http://lorempixum.com/180/180/" alt="Avatar do usuário" /></a>
        #end
        <ul class="unstyled">
            <li>$user.userId</li>
            <li>$user.phoneNumber</li>
        </ul>
        #if ($user.description)
        <section class="description">$user.description</section>
        #end
    </section>

    <hr />

    <a href="/user/edit">Preferências</a>

    <hr />

    <section class="user-domains">
        <h3>Coletivos associados</h3>
        <img class="loader" src="/img/ajax-loader.gif" />
    </section>

    <hr/>

    <a href="/domain/list">Listar coletivos</a> <br />
    <a href="/users/list">Listar usuários</a>
</div>
<div class="left">
    <section id="main-intern">
        <p><span class="label important">Atenção!</span> Faça um favor a si mesmo, preencha de forma correta e verídica a fim de evitar problemas futuros.</p>

        <hr />

        <form id="user-preferences" action="/user/edit" method="post" accept-charset="utf-8">
            <fieldset>
                <legend>Atualização da conta</legend>
                <input type="hidden" name="_method" value="put" />
                <div>
                    <label for="name">Nome</label>
                    <input type="text" id="name" name="name" value="$!{name}" required />
                    #if ($invalid.name)
                    <span>$invalid.name</span>
                    #end
                </div>
                <div>
                    <label for="phoneNumber">Telefone</label>
                    <input type="text" name="phoneNumber" value="$!{phoneNumber}" pattern="^(([0-9]{2}|\\([0-9]{2}\\))[ ])?[0-9]{4}[-. ]?[0-9]{4}$" required />
                    #if ($invalid.phoneNumber)
                    <span>$invalid.phoneNumber</span>
                    #end
                </div>
                <div id="description-area">
                    <ul>
                        <li><a id="viewText" class="selected" href="#">Texto</a></li>
                        <li></li>
                        <li><a id="viewPreview" href="#">Visualização</a></li>
                    </ul>
                    <label for="description">Descrição</label>
                    <textarea id="description" name="description" rows="9">$!{description}</textarea>
                    <div id="markdown-preview"></div>
                </div>
            </fieldset>
            <input type="submit" value="É hora de mudar!" />
        </form>
    </section>
</div>
#end

#scripts()